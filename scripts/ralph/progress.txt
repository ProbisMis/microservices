# Ralph Progress Log
Started: Sat, Jan 24, 2026  2:21:11 PM
---

## Codebase Patterns
- Follow `events-common` pattern for shared modules: parent ref, skip spring-boot-maven-plugin, minimal dependencies
- Use `com.demo.programming` as base package for services
- Use `org.programming.microservices` as groupId for modules
- GlobalExceptionHandler pattern: Use `@RestControllerAdvice` with specific handlers for each exception type, return `ErrorResponse` record
- Add `exceptions-common` dependency with `${project.version}` for shared exceptions across services
- Use `HttpServletRequest` parameter in exception handlers to get request URI for error response path field
---

## 2026-01-24 14:22 - US-001
- Created exceptions-common/pom.xml following events-common pattern
- Files changed: exceptions-common/pom.xml
- **Learnings for future iterations:**
  - Shared modules must have `<skip>true</skip>` in spring-boot-maven-plugin config to prevent repackaging as executable JAR
  - Module won't be found by Maven `-pl` flag until added to parent pom.xml modules list
  - spring-web dependency is needed for HttpStatus enum
  - Shared modules must have `<skip>true</skip>` in spring-boot-maven-plugin config to prevent repackaging as executable JAR
  - Module won't be found by Maven `-pl` flag until added to parent pom.xml modules list
  - spring-web dependency is needed for HttpStatus enum
---

## 2026-01-24 14:23 - US-002
- Created BaseException abstract class extending RuntimeException
- Files changed: exceptions-common/src/main/java/com/demo/programming/exceptions/base/BaseException.java
## 2026-01-24 14:23 - US-002
- Created BaseException abstract class extending RuntimeException
- Files changed: exceptions-common/src/main/java/com/demo/programming/exceptions/base/BaseException.java
- **Learnings for future iterations:**
  - Use `protected` constructor in abstract exception classes so subclasses can call super()
  - Keep fields `final` for immutability (errorCode, httpStatus, resourceName)
  - Follow events-common package pattern: `com.demo.programming.exceptions.base`
---

## 2026-01-24 15:41 - US-006
- Created ErrorResponse Java record for standard API error responses
- Files changed: exceptions-common/src/main/java/com/demo/programming/exceptions/dto/ErrorResponse.java
- **Learnings for future iterations:**
  - Java records are ideal for DTOs - immutable, concise, auto-generated equals/hashCode/toString
  - Added static factory method `of()` for convenient instantiation with auto-timestamp
  - Use `java.time.Instant` for timestamps in API responses for proper ISO-8601 serialization
---

## 2026-01-24 15:47 - US-007 through US-017
- Completed GlobalExceptionHandler implementation across all services
- **Files changed:**
  - product-service/pom.xml (added exceptions-common dependency)
  - product-service/src/main/java/.../exception/GlobalExceptionHandler.java (new)
  - product-service/src/main/java/.../service/ProductService.java (refactored)
  - inventory-service/pom.xml (added exceptions-common dependency)
  - inventory-service/src/main/java/.../exception/GlobalExceptionHandler.java (new)
  - inventory-service/src/main/java/.../service/InventoryService.java (refactored)
  - order-service/pom.xml (added exceptions-common dependency)
  - order-service/src/main/java/.../exception/GlobalExceptionHandler.java (new)
  - order-service/src/main/java/.../service/OrderService.java (refactored)
- **Learnings for future iterations:**
  - Each service needs its own GlobalExceptionHandler - not shared via exceptions-common
  - Order-service needs FeignException handler to properly propagate errors from downstream services
  - When throwing InsufficientStockException, collect the actual out-of-stock skuCodes from inventory response
  - Use `HttpStatus.resolve()` to safely convert Feign exception status codes
  - All services now return consistent ErrorResponse format with timestamp, status, error, message, path
---
